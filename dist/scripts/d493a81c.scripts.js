!function(){"use strict";function a(a,b,c,d,e,f){var g=500,h=10;a.session={};var i=Parse.User.current();i&&(b.currentUser=i.attributes,b.currentUser.picture=i.picture||"images/no_avatar.png",f=b.currentUser),b.displayLogin=!Parse.User.current(),e.localStorage&&!e.localStorage.trainings?d.getAll().then(function(b){a.session.all=b,e.localStorage.trainings=JSON.stringify(b)}):a.session.all=JSON.parse(e.localStorage.trainings),a.goTo=function(a){var b=angular.element(document.getElementById(a));c.scrollToElement(b,h,g)}}function b(a){a.when("/",{controller:"MainController",templateUrl:"views/main.html"}).otherwise({redirectTo:"/"})}angular.module("philosAngularApp",["ngRoute","ngResource","authentication","training","duScroll","profile","cart"]).run(function(){var a={js:"LnV5YM6ZtvYZ7nrI2tx58IN8ABWTb67KgUJADAef",appID:"sNUJR4kRaArwjeBtlkdcdSm5cmDYeHidBQIyIYVt",server:"F3JxL62hhpsnYK16oTg0R3A6SUdeQ6SLZmlWgSgQ",client:"GZIN8ZcKwlmcJe4Y8B14a2J17iFasnzQfAw8vZhX"};Parse.initialize(a.appID,a.js)}).config(["$routeProvider","$locationProvider",b]).controller("MainController",["$scope","$rootScope","$document","trainingFactory","$window","CurrentUser",a])}(),function(){angular.module("philosAngularApp").constant("CurrentUser",{})}(),function(){"use strict";function a(a){a.when("/signup",{controller:"AuthController",templateUrl:"views/signup.html"}).when("/signin",{controller:"AuthController",templateUrl:"views/signin.html"}).when("/forgot",{controller:"AuthController",templateUrl:"views/forgot.html"})}angular.module("authentication",[]).config(["$routeProvider",a])}(),function(){"use strict";function a(a,b,c,d,e){function f(a){c.currentUser=a,c.auth=!1,d.path("/trainings")}function g(a){throw a}e.scrollTop(0,0),c.displayLogin=!1,a.signIn=function(){b.signIn(a.login).then(f,g)},a.signUp=function(){b.signUp(a.user).then(f,g)},c.logout=function(){b.logout(),d.path("/")}}angular.module("authentication").controller("AuthController",["$scope","authFactory","$rootScope","$location","$document",a])}(),function(){"use strict";function a(a){function b(a){return Parse.User.logIn(a.email,a.password,{success:d,error:e}),h.promise}function c(a){var b=new Parse.User;b.set("username",a.email);for(var c in a)b.set(c,a[c]);return b.signUp(null,{success:d,error:e}),h.promise}function d(a){var b=a.attributes;b.id=a.id,h.resolve(b)}function e(a,b){h.resolve({user:a,error:b})}function f(){Parse.User.logOut()}function g(){}var h=a.defer();return{signIn:b,signUp:c,logout:f,forgot:g}}angular.module("authentication").factory("authFactory",["$q",a])}(),function(){"use strict";function a(a){a.when("/trainings",{controller:"TrainingController",templateUrl:"views/trainings.html"}).when("/trainings/:training_id",{controller:"TrainingDetailsController",templateUrl:"views/trainingDetails.html"})}angular.module("training",[]).config(["$routeProvider",a])}(),function(){"use strict";function a(a,b,c,d){d.getAll().then(function(c){a.trainings=c,b.localStorage.trainings=JSON.stringify(c)})}angular.module("training").controller("TrainingController",["$scope","$window","CurrentUser","trainingFactory",a])}(),function(){"use strict";function a(a,b,c,d,e){a.session=c.getTrainingById(b.training_id)[0],e.scrollTop(0,0),a.session.numberAttendees=a.session.attendees.length,a.register=function(){d.url("https://ti.to/oneweekoneproject/nodejs/")}}angular.module("training").controller("TrainingDetailsController",["$scope","$routeParams","trainingFactory","$location","$document","$window","$rootScope","CurrentUser",a])}(),function(){"use strict";function a(a,b,c){function d(){var a=b.defer(),c=Parse.Collection.extend({model:Parse.Object.extend("Training")}),d=new c;return d.fetch({success:function(b){var c=[];b.forEach(function(a){var b=a.attributes;b.id=a.id,c.push(b)}),a.resolve(c)},error:function(){a.resolve(!1)}}),a.promise}function e(a){return JSON.parse(c.localStorage.trainings||d()).filter(function(b){return b.id===a})}return{getAll:d,getTrainingById:e}}angular.module("philosAngularApp").factory("trainingFactory",["$resource","$q","$window",a])}(),function(){"use strict";function a(a){a.when("/cart",{controller:"CartController",templateUrl:"views/cart.html"})}angular.module("cart",[]).config(["$routeProvider",a])}(),function(){"use strict";function a(){}angular.module("cart").controller("CartController",["$scope","cartFactory","$rootScope","$location",a])}(),function(){"use strict";function a(){}angular.module("cart").factory("cartFactory",["$q",a])}(),function(){"use strict";function a(a){a.when("/profile",{controller:"ProfileController",templateUrl:"views/profile.html"})}angular.module("profile",[]).config(["$routeProvider",a])}(),function(){"use strict";function a(a,b,c,d){b.scrollTop(0,0),d.getUser(!0).then(function(b){a.user=b,c.currentUser=b,a.apply()}),a.isEditMode=!1,a.showSession=!1,a.enableSocialMedia=function(){var b=a.user;return!(b&&b.github&&b.linkedIn&&b.twitter)},a.sessions=function(){a.trainings=c.currentUser.sessions,a.showSession=!a.showSession},a.edit=function(){a.isEditMode=!a.isEditMode},a.update=function(){a.isEditMode=!1,b.scrollTop(0,0)},a.unlinkTwitter=function(){throw"now implemented yet!"},a.unlinkGithub=function(){throw"now implemented yet!"},a.unlinkLinkedIn=function(){throw"now implemented yet!"}}angular.module("profile").controller("ProfileController",["$scope","$document","$scope","profileFactory",a]).directive("changemode",function(){return{restrict:"A",link:function(a,b){b.click(function(){var a=b.text();b.text("Edit"===a?"Cancel":"Edit")})}}})}(),function(){"use strict";function a(a){function b(a){var b=Parse.User.current();if(a){var f=new Parse.Query(Parse.User);f.get(b.id,{success:c,error:d})}else{var g=b.attributes;g.id=b.id,e.resolve(g)}return e.promise}function c(a){var b=a.attributes;b.id=a.id,e.resolve(b)}function d(a,b){e.resolve({user:a,error:b})}var e=a.defer();return{getUser:b}}angular.module("profile").factory("profileFactory",["$q",a])}(),function(a,b){var c=function(){var c,d=b(a.documentElement),e=b(a.body);return d.scrollTop()?d:(c=e.scrollTop(),e.scrollTop(c+1).scrollTop()==c?d:e.scrollTop(c))}();b.fn.smoothScroll=function(a){return a=~~a||400,this.find('a[href*="#"]').click(function(d){var e=this.hash,f=b(e);location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname&&f.length&&(d.preventDefault(),c.stop().animate({scrollTop:f.offset().top},a,function(){location.hash=e}))}).end()}}(document,jQuery);